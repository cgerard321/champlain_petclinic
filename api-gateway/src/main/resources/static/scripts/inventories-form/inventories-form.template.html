<style>
    /* Mobile-friendly spacing */
    @media (max-width: 576px) {
        .formColor .form-group { margin-bottom: 12px; }
        .form-horizontal .control-label { margin-bottom: 4px; }
    }

    .type-row { display: grid; grid-template-columns: 1fr; gap: 8px; }
    @media (min-width: 768px) {
        .type-row { grid-template-columns: 1fr 1fr; }
    }

    @media (max-width: 576px) {
        .sticky-actions {
            position: sticky; bottom: 0; z-index: 1;
            background: #fff; padding-top: 8px;
        }
    }
</style>

<div class="bColor text-center">
    <h2 class="titleBundle form" id="title">Add new Inventory</h2>
</div>

<div class="p-3 formColor m-0">
    <form id="inventoryForm" name="inventoryForm"
          class="form-horizontal" enctype="multipart/form-data"
          ng-submit="inventoryForm.$valid && $ctrl.submitInventoryForm()" novalidate>

        <!-- Row 1: Inventory name -->
        <div class="row">
            <div class="col-12 col-md-6 form-group"
                 ng-class="{'has-error': inventoryForm.inventoryName.$touched && inventoryForm.inventoryName.$invalid}">
                <label class="control-label" for="inventoryName">Inventory name</label>
                <input class="form-control" id="inventoryName"
                       ng-model="$ctrl.inventory.inventoryName"
                       name="inventoryName" type="text"
                       required ng-change="checkNameAdd()"
                       title="Enter the inventory name.">
                <div class="help-block text-danger"
                     ng-if="inventoryForm.inventoryName.$touched && inventoryForm.inventoryName.$error.required">
                    Inventory name is required.
                </div>
                <div class="help-block text-danger"
                     ng-if="inventoryForm.inventoryName.$touched && inventoryForm.inventoryName.$error.duplicate">
                    Inventory name already exists.
                </div>
            </div>
        </div>

        <!-- Row 2: Inventory type (search + select) -->
        <div class="row">
            <div class="col-12 col-md-6 form-group"
                 ng-class="{'has-error':
             (inventoryForm.inventoryType.$touched && inventoryForm.inventoryType.$invalid) ||
             (inventoryForm.typeSearch.$touched && inventoryForm.typeSearch.$invalid)}">
                <label class="control-label" for="inventoryType">Inventory Type</label>

                <div class="type-row">
                    <input class="form-control" id="typeSearch" name="typeSearch"
                           type="text" placeholder="Search"
                           ng-model="inventoryTypeFormSearch" ng-change="updateOption()"
                           ng-required="selectedOption === 'New Type'">

                    <select class="form-control" id="inventoryType"
                            ng-options="option for option in inventoryTypeOptions"
                            ng-model="selectedOption" name="inventoryType"
                            required title="Please select the inventory type.">
                    </select>
                </div>

                <div class="help-block text-danger"
                     ng-if="inventoryForm.inventoryType.$touched && inventoryForm.inventoryType.$error.required">
                    Inventory type is required.
                </div>
                <div class="help-block text-danger"
                     ng-if="selectedOption === 'New Type' && inventoryForm.typeSearch.$touched && inventoryForm.typeSearch.$error.required">
                    Please provide a name for the new type.
                </div>
            </div>
        </div>

        <!-- Row 3: Description -->
        <div class="row">
            <div class="form-group col-12"
                 ng-class="{'has-error': inventoryForm.inventoryDescription.$touched && inventoryForm.inventoryDescription.$invalid}">
                <label class="control-label" for="invDesc">Inventory Description</label>
                <input class="form-control" id="invDesc"
                       ng-model="$ctrl.inventory.inventoryDescription"
                       name="inventoryDescription" type="text"
                       required title="Please select a date.">
                <div class="help-block text-danger"
                     ng-if="inventoryForm.inventoryDescription.$touched && inventoryForm.inventoryDescription.$error.required">
                    Inventory description is required.
                </div>
            </div>
        </div>

        <!-- Submit -->
        <div class="form-group p-3 sticky-actions">
            <div class="bundle marg col-12">
                <button id="newBtn" class="w-100 btn btn-primary btn-lg" type="submit"
                        ng-disabled="inventoryForm.$invalid || saving">
                    Submit
                </button>
            </div>
        </div>
    </form>
</div>
