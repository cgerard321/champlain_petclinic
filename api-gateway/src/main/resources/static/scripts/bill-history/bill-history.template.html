<h2 class="titleOwner">Bill History</h2>

<a ui-sref="billNew">
    <button class="add-bill-button btn btn-success">Add Bill</button>
</a><br><br>


<button type="button" class="collapsible" data-section="Paid">Open Paid</button>
<table class="content table table-striped">
    <thead>
    <tr>
        <td>Bill ID</td>
        <td>Owner Name</td>
        <td>Owner Details</td>
        <td>Vet Name</td>
        <td>Visit Type</td>
        <td>Amount</td>
        <td>Status</td>
        <td>Due Date</td>
        <td>Date</td>
        <td>Details</td>
        <td>Delete</td>

    </tr>
    </thead>

    <tr id="billIdPaid" ng-repeat="paidBill in $ctrl.paidBills | filter:$ctrl.query track by paidBill.billIdPaid">
    <tr ng-repeat="paidBill in $ctrl.paidBills | filter:search:strict">
        <td><a href="http://localhost:8080/#!/bills/details/{{paidBill.billId}}/owner/{{paidBill.customerId}}">{{paidBill.billId}}</a></td>
        <td>{{ getCustomerDetails(paidBill.customerId) }}</td>
    <td><a href="http://localhost:8080/#!/owners/details/{{ getOwnerUUIDByCustomerId(paidBill.customerId) }}">Owner details</a></td>
        <td>{{ getVetDetails(paidBill.vetId) }}</td>
        <td>{{paidBill.visitType}}</td>
        <td>{{paidBill.amount}}</td>
        <td>{{paidBill.billStatus}}</td>
        <td>{{paidBill.dueDate}}</td>
        <td>{{paidBill.date}}</td>
        <td><a href="http://localhost:8080/#!/bills/details/{{paidBill.billId}}/owner/{{paidBill.customerId}}">Get Details</a></td>
        <td><a class="btn btn-danger" href="javascript:void(0)" ng-click="deleteBill(paidBill.billId)">Delete Bill</a></td>
    </tr>
</table>
<br><br>
<button type="button" class="collapsible" data-section="Unpaid">Open Unpaid Bills</button>
<table class="content table table-striped">
    <thead>
    <tr>
        <td>Bill ID</td>
        <td>Owner Name</td>
        <td>Owner Details</td>
        <td>Vet Name</td>
        <td>Visit Type</td>
        <td>Amount</td>
        <td>Status</td>
        <td>Due Date</td>
        <td>Date</td>
        <td>Details</td>
        <td>Delete</td>

    </tr>
    </thead>

    <tr id="billIdUnpaid" ng-repeat="unpaidBill in $ctrl.unpaidBills | filter:$ctrl.query track by unpaidBill.billIdUnpaid">
    <tr ng-repeat="unpaidBill in $ctrl.unpaidBills | filter:search:strict">
        <td><a href="http://localhost:8080/#!/bills/details/{{unpaidBill.billId}}/owner/{{unpaidBill.customerId}}">{{unpaidBill.billId}}</a></td>
        <td>{{ getCustomerDetails(unpaidBill.customerId) }}</td>
    <td><a href="http://localhost:8080/#!/owners/details/{{ getOwnerUUIDByCustomerId(unpaidBill.customerId) }}">Owner details</a></td>
        <td>{{ getVetDetails(unpaidBill.vetId) }}</td>
        <td>{{unpaidBill.visitType}}</td>
        <td>{{unpaidBill.amount}}</td>
        <td>{{unpaidBill.billStatus}}</td>
        <td>{{unpaidBill.dueDate}}</td>
        <td>{{unpaidBill.date}}</td>
        <td><a href="http://localhost:8080/#!/bills/details/{{unpaidBill.billId}}/owner/{{unpaidBill.customerId}}">Get Details</a></td>
        <td><a class="btn btn-danger" href="javascript:void(0)" ng-click="deleteBill(unpaidBill.billId)">Delete Bill</a></td>
    </tr>
</table>

<br><br>
<button type="button" class="collapsible" data-section="Overdue">Open Overdue Bills</button>
<table class="content table table-striped">
    <thead>
    <tr>
        <td>Bill ID</td>
        <td>Owner Name</td>
        <td>Owner Details</td>
        <td>Vet Name</td>
        <td>Visit Type</td>
        <td>Amount</td>
        <td>Status</td>
        <td>Due Date</td>
        <td>Date</td>
        <td>Details</td>
        <td>Delete</td>

    </tr>
    </thead>

    <tr id="billIdOverdue" ng-repeat="overdueBill in $ctrl.overdueBills | filter:$ctrl.query track by overdueBill.billIdOverdue">
    <tr ng-repeat="overdueBill in $ctrl.overdueBills | filter:search:strict">
        <td><a href="http://localhost:8080/#!/bills/details/{{overdueBill.billId}}/owner/{{overdueBill.customerId}}">{{overdueBill.billId}}</a></td>
        <td>{{ getCustomerDetails(overdueBill.customerId) }}</td>
    <td><a href="http://localhost:8080/#!/owners/details/{{ getOwnerUUIDByCustomerId(overdueBill.customerId) }}">Owner details</a></td>
        <td>{{ getVetDetails(overdueBill.vetId) }}</td>
        <td>{{overdueBill.visitType}}</td>
        <td>{{overdueBill.amount}}</td>
        <td>{{overdueBill.billStatus}}</td>
        <td>{{overdueBill.dueDate}}</td>
        <td>{{overdueBill.date}}</td>
        <td><a href="http://localhost:8080/#!/bills/details/{{overdueBill.billId}}/owner/{{overdueBill.customerId}}">Get Details</a></td>
        <td><a class="btn btn-danger" href="javascript:void(0)" ng-click="deleteBill(overdueBill.billId)">Delete Bill</a></td>
    </tr>
</table>
<br><br>
<h3>All Bills</h3>
<table class="table table-striped">
    <thead>
        <tr>
            <td>Bill ID</td>
            <td>Owner Name</td>
            <td>Owner Details</td>
            <td>Vet Name</td>
            <td>Visit Type</td>
            <td>Amount</td>
            <td>Status</td>
            <td>Due Date</td>
            <td>Date</td>
            <td>Details</td>
            <td>Delete</td>

        </tr>
    </thead>

    <tbody class="bg-white border">
    <tr>
        <td class="bg-white border" ></td>
        <td class="bg-white border">
         <!--   <input ng-model="$ctrl.query.bill.owner.firstName" placeholder="Filter by Customer Name"> -->
        </td>
        <td class="bg-white border"></td>
        <td class="bg-white border"></td>
        <td class="bg-white border">
            <input ng-model="search.visitType" placeholder="Filter by visit type">
        </td>
        <td class="bg-white border">
            <input ng-model="search.amount" placeholder="Filter by amount">
        </td>
        <td class="bg-white border">
            <input ng-model="search.billStatus" placeholder="Filter by status">
        </td>
        <td class="bg-white border">
            <input ng-model="search.dueDate" placeholder="Filter by due date">
        </td>
        <td class="bg-white border">
            <input ng-model="search.date" placeholder="Filter by date">
        </td>
        <td class="bg-white border"></td>
        <td class="bg-white border"></td>
    </tr>

    <tr id="billId" ng-repeat="bill in $ctrl.billHistory | filter:$ctrl.query track by bill.billId">
    <tr ng-repeat="bill in $ctrl.billHistory | filter:search:strict">
    <td><a href="http://localhost:8080/#!/bills/details/{{bill.billId}}/owner/{{bill.customerId}}">{{bill.billId}}</a></td>
        <td>{{ getCustomerDetails(bill.customerId) }}</td>

    <td><a href="http://localhost:8080/#!/owners/details/{{ getOwnerUUIDByCustomerId(bill.customerId) }}">Owner details</a></td>

<!--    <td><a href="http://localhost:8080/#!/owners/details/{{bill.customerId}}">Owner details</a></td>-->
    <td>{{ getVetDetails(bill.vetId) }}</td>
        <td>{{bill.visitType}}</td>
        <td>{{bill.amount}}</td>
        <td>{{bill.billStatus}}</td>
        <td>{{bill.dueDate}}</td>
        <td>{{bill.date}}</td>
        <td><a href="http://localhost:8080/#!/bills/details/{{bill.billId}}/owner/{{bill.customerId}}">Get Details</a></td>
        <td><a class="btn btn-danger" href="javascript:void(0)" ng-click="deleteBill(bill.billId)">Delete Bill</a></td>
    </tr>
    </tbody>
</table>

<a class="btn btn-danger" href="javascript:void(0)" ng-click="deleteAllBills()">Delete All Bills</a>

<style>
    .content {
        display: none;
        overflow: hidden;
    }
    .collapsible {
        background-color: #eee;
        color: #444;
        cursor: pointer;
        padding: 10px;
        border: none;
        text-align: left;
        font-size: 15px;
        font-weight: bold;
        text-decoration: underline;
    }

    .active, .collapsible:hover {
        background-color: #ccc;
    }

</style>

<script>
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "block") {
                content.style.display = "none";
                this.textContent = "Open " + this.getAttribute("data-section") + " Bills";

            } else {
                content.style.display = "block";
                this.textContent = "Close " + this.getAttribute("data-section") + " Bills";

            }
        });
    }
</script>
