<?xml version="1.0" encoding="UTF-8"?>
<plugin>

    <!-- =========================
         A) DRIVER DEFINITION (Generic)
         This is the critical bit the UI needs to show "MongoDB (JDBC)".
         ========================= -->
    <extension point="org.jkiss.dbeaver.dataSourceProvider">
        <!-- Extend the Generic JDBC provider -->
        <datasource id="generic">
            <drivers managable="true">
                <driver
                        id="mongodb-jdbc"
                        label="MongoDB (JDBC)"
                        description="MongoDB JDBC driver (SQL over Mongo; class com.mongodb.jdbc.MongoDriver)"
                        class="com.mongodb.jdbc.MongoDriver"
                        sampleURL="jdbc:mongodb://{host}[:{port}]/{database}"
                        useURL="true"
                        defaultPort="27017"
                        categories="nosql">
                    <!-- Point to the folder with our JARs -->
                    <file type="jar" path="drivers/mongodb-jdbc" bundle="drivers.mongodb-jdbc"/>
                </driver>
            </drivers>
        </datasource>
    </extension>

    <!-- =========================
         B) RESOURCES/BUNDLES/ENABLED (wiki "Include driver in server configuration")
         ========================= -->
    <!-- Tell CloudBeaver where the jars live -->
    <extension point="io.cloudbeaver.resources">
        <resource name="drivers/mongodb-jdbc"/>
    </extension>

    <!-- Declare the bundle id that maps to that resource folder -->
    <extension point="io.cloudbeaver.resourceBundle">
        <bundle id="drivers.mongodb-jdbc" label="MongoDB JDBC Driver files"/>
    </extension>

    <!-- Enable the driver by its FULL id: providerId.driverId => generic.mongodb-jdbc -->
    <extension point="io.cloudbeaver.enabledDrivers">
        <driver id="generic.mongodb-jdbc"/>
    </extension>

</plugin>
