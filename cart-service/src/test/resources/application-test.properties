# Use random port for embedded MongoDB
spring.data.mongodb.port=0
spring.data.mongodb.host=localhost
spring.data.mongodb.database=test

# Enable embedded MongoDB
spring.mongodb.embedded.version=6.0.5

# Auto create indexes
spring.data.mongodb.auto-index-creation=true

# Enable auto-configuration for tests
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration

# Disable SSL for embedded MongoDB
spring.mongodb.embedded.features=NO_OP

# Mock external services
products-service.base-url=http://localhost:${wiremock.server.port:8080}/api/v1/products
app.auth-service.host=localhost
app.auth-service.port=${wiremock.server.port:8080}
app.mailer-service.host=localhost
app.mailer-service.port=${wiremock.server.port:8080}

# Disable security for tests
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration,org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration

# Logging
logging.level.org.springframework.data.mongodb=DEBUG
logging.level.com.mongodb=DEBUG